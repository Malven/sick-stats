<!DOCTYPE html>
<html lang="sv">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sjukfrånvaro</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Header -->
    <header>
      <div class="header-top">
        <h1>Sjukfrånvaro</h1>
        <nav class="header-nav">
          <a href="charts.html" class="nav-link">Statistik</a>
        </nav>
      </div>
      <div class="summary">
        <span id="sick-count">0</span> sjuka, <span id="vab-count">0</span> VAB,
        <span id="parental-count">0</span> föräldralediga (<span
          id="total-absent"
          >0</span
        >
        totalt)
      </div>
    </header>

    <!-- Main Content -->
    <main>
      <div class="controls">
        <input
          type="text"
          id="personnel-search"
          class="search-input"
          placeholder="Sök personal..."
        />
        <div class="filters-container">
          <select id="leave-type-filter" class="filter-select">
            <option value="all">Alla</option>
            <option value="sick">Sjuk</option>
            <option value="vab">VAB</option>
            <option value="parental">Föräldraledig</option>
            <option value="at-work">På Jobbet</option>
          </select>
          <select id="role-filter" class="filter-select" style="display: none">
            <option value="all">Alla Områden</option>
          </select>
        </div>
        <button id="add-personnel-btn" class="btn btn-primary">
          + Lägg till Personal
        </button>
      </div>

      <!-- Personnel List -->
      <div id="personnel-list" class="personnel-list">
        <!-- Personnel cards will be dynamically inserted here -->
      </div>

      <div id="empty-state" class="empty-state">
        <p>
          Inga personalposter än. Klicka på "Lägg till Personal" för att komma
          igång.
        </p>
      </div>
    </main>

    <!-- Add/Edit Personnel Modal -->
    <div id="personnel-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="personnel-modal-title">Lägg till Personal</h2>
          <button class="close-btn" aria-label="Stäng">&times;</button>
        </div>
        <form id="personnel-form">
          <div class="form-group">
            <label for="personnel-name"
              >Fullständigt Namn <span class="required">*</span></label
            >
            <input type="text" id="personnel-name" name="name" required />
          </div>
          <div class="form-group">
            <label for="personnel-role">Område</label>
            <input type="text" id="personnel-role" name="role" />
          </div>
          <input type="hidden" id="personnel-id" name="id" />
          <div class="form-actions">
            <button type="button" class="btn btn-secondary cancel-btn">
              Avbryt
            </button>
            <button type="submit" class="btn btn-primary">Spara</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Register Leave Modal -->
    <div id="leave-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Registrera Frånvaro</h2>
          <button class="close-btn" aria-label="Stäng">&times;</button>
        </div>
        <form id="leave-form">
          <div class="form-group">
            <label for="leave-person-name">Personal</label>
            <input type="text" id="leave-person-name" readonly />
          </div>
          <div class="form-group">
            <label for="leave-type"
              >Frånvarotyp <span class="required">*</span></label
            >
            <select id="leave-type" name="type" required>
              <option value="sick">Sjuk</option>
              <option value="vab">VAB (Vård Av Barn)</option>
              <option value="parental">Föräldraledig</option>
            </select>
          </div>
          <div class="form-group">
            <label for="leave-start-date"
              >Startdatum <span class="required">*</span></label
            >
            <input
              type="date"
              id="leave-start-date"
              name="startDate"
              required
            />
          </div>
          <div
            class="form-group"
            id="leave-end-date-group"
            style="display: none"
          >
            <label for="leave-end-date"
              >Slutdatum <span class="required">*</span></label
            >
            <input type="date" id="leave-end-date" name="endDate" />
          </div>
          <div class="form-group">
            <label for="leave-comment">Kommentar</label>
            <textarea id="leave-comment" name="comment" rows="3"></textarea>
          </div>
          <input type="hidden" id="leave-person-id" name="personId" />
          <div class="form-actions">
            <button type="button" class="btn btn-secondary cancel-btn">
              Avbryt
            </button>
            <button type="submit" class="btn btn-primary">
              Registrera Frånvaro
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Register Return to Work Modal -->
    <div id="return-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Registrera Återgång till Arbete</h2>
          <button class="close-btn" aria-label="Stäng">&times;</button>
        </div>
        <form id="return-form">
          <div class="form-group">
            <label for="return-person-name">Personal</label>
            <input type="text" id="return-person-name" readonly />
          </div>
          <div class="form-group">
            <label for="return-date"
              >Återgångsdatum <span class="required">*</span></label
            >
            <input type="date" id="return-date" name="returnDate" required />
          </div>
          <input type="hidden" id="return-person-id" name="personId" />
          <input type="hidden" id="return-record-index" name="recordIndex" />
          <div class="form-actions">
            <button type="button" class="btn btn-secondary cancel-btn">
              Avbryt
            </button>
            <button type="submit" class="btn btn-primary">
              Registrera Återgång
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Bekräfta Borttagning</h2>
          <button class="close-btn" aria-label="Stäng">&times;</button>
        </div>
        <div class="modal-body">
          <p>
            Är du säker på att du vill ta bort
            <strong id="delete-person-name"></strong>?
          </p>
          <p class="warning">
            Alla tillhörande frånvaroposter kommer att tas bort permanent.
          </p>
        </div>
        <input type="hidden" id="delete-person-id" />
        <div class="form-actions">
          <button type="button" class="btn btn-secondary cancel-btn">
            Avbryt
          </button>
          <button id="confirm-delete-btn" class="btn btn-danger">
            Ta Bort
          </button>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
